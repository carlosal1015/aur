From af245c8486b81d46dcaeb98c2b021a1688e6eab6 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Carlos=20Aznar=C3=A1n?= <caznaranl@uni.pe>
Date: Wed, 15 Oct 2025 13:30:55 -0500
Subject: [PATCH] Enable python bindings

---
 .SRCINFO |  5 ++++-
 PKGBUILD | 10 +++++++---
 2 files changed, 11 insertions(+), 4 deletions(-)

diff --git a/.SRCINFO b/.SRCINFO
index b5e022b..b9bd7a5 100644
--- a/.SRCINFO
+++ b/.SRCINFO
@@ -1,11 +1,14 @@
 pkgbase = libisl
 	pkgdesc = Library for manipulating sets and relations of integer points bounded by linear constraints
 	pkgver = 0.27
-	pkgrel = 1
+	pkgrel = 2
 	url = https://libisl.sourceforge.io
 	arch = x86_64
 	license = MIT
+	makedepends = llvm
+	makedepends = clang
 	depends = gmp
+	depends = python
 	provides = isl
 	provides = libisl.so
 	replaces = isl
diff --git a/PKGBUILD b/PKGBUILD
index 43b1511..eb271cf 100644
--- a/PKGBUILD
+++ b/PKGBUILD
@@ -6,12 +6,13 @@
 
 pkgname=libisl
 pkgver=0.27
-pkgrel=1
+pkgrel=2
 pkgdesc='Library for manipulating sets and relations of integer points bounded by linear constraints'
 arch=('x86_64')
 url='https://libisl.sourceforge.io'
 license=('MIT')
-depends=('gmp')
+depends=('gmp' 'python')
+makedepends=('llvm' 'clang')
 provides=('isl' 'libisl.so')
 replaces=('isl')
 options=(staticlibs)
@@ -20,7 +21,7 @@ b2sums=('88a68de0b7952eb0038d10aa450b0ab25da4f4aa49fcdf70700ec4131d2686a2a2e9a64
 
 build() {
   cd "${srcdir}"/${pkgname#lib}-${pkgver}
-  ./configure --prefix=/usr
+  ./configure --prefix=/usr --with-clang=system
   make
 }
 
@@ -34,6 +35,9 @@ package() {
 
   make DESTDIR="${pkgdir}" install
 
+  local _sitepackages=$(python -c "import site; print(site.getsitepackages()[0])")
+  install -Dm644 interface/${pkgname#lib}.py -t "${pkgdir}${_sitepackages}"
+
   install -dm755 "${pkgdir}"/usr/share/gdb/auto-load/usr/lib/
   mv "${pkgdir}"/usr/lib/libisl.so.*-gdb.py "${pkgdir}"/usr/share/gdb/auto-load/usr/lib/
 
-- 
2.51.0

